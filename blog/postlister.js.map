{"version":3,"file":"postlister.js","sourceRoot":"","sources":["postlister.ts"],"names":[],"mappings":"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","sourcesContent":[" interface Person {\n    username : string,\n    uid: string,\n    photoUrl: string\n}\n\ninterface Comm{\n    author: Person,\n\n    time: Date,\n    content: string\n}\n\n interface Post {\n    author: Person,\n     title: string,\n    time: Date,\n    content: string,\n     comments:Array<Comm>\n}\n// @ts-ignore\nfunction typeset(){\n    // @ts-ignore\n    renderMathInElement(document.querySelector(\"#postHolder\"),{delimiters: [\n            {left: \"$$\", right: \"$$\", display: true},\n            {left: \"$\", right: \"$\", display: false}\n        ]});\n}\n\n// @ts-ignore\n function makeComment(c:Comm):string{\n    return `<li class=\"list-group-item pb-0\"><h5><img height=\"30px\" src=\"${c.author.photoUrl}\" class=\"rounded-circle mr-3\">${c.author.username}</h5>\n                    <div class=\"pl-5\">\n                        <p>${c.content}</p>\n                    </div>\n\n                </li>`;\n}\n\n// @ts-ignore\n function makeCommentList(comms:Array<Comm>){\n    let complete: string = ``;\n    for (var c of comms){\n        complete += makeComment(c);\n    }\n    return complete\n}\n\n// @ts-ignore\n function printDate(d:Date){\n    const minSince:number = Math.ceil((Date.now()-d.getTime())/60000);\n    const hrSince:number  = Math.floor(minSince/60);\n    const daySince:number  = Math.floor(hrSince/24);\n    const weekSince:number  = Math.floor(daySince/7);\n    const monthSince:number  = Math.floor(weekSince/4);\n    //const yearSince:number  = Math.floor(monthSince/12);\n    if (minSince==0){\n        return \"just now\";\n    }\n    else if (minSince < 60){\n        return `${minSince} minute${minSince==1 ? '':'s'} ago`;\n    }\n    else if (hrSince < 24){\n        return `${hrSince} hour${hrSince==1 ? '':'s'} ago`;\n    }\n    else if (daySince < 7){\n        return `${daySince} day${daySince==1 ? '':'s'} ago`;\n    }\n    else if (weekSince < 4){\n        return `${weekSince} week${weekSince==1 ? '':'s'} ago`;\n    }\n    else {\n\n        const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"June\", \"Jul\", \"Aug\", \"Sept\", \"Oct\", \"Nov\", \"Dec\"];\n        return `on ${months[d.getMonth()]} ${d.getDate()}, ${d.getFullYear()}`;\n        // on Jul 31, 1975\n    }\n}\n\n// @ts-ignore\n function makePost(p:Post): string {\n     return `<div class=\"card my-3 no-def\" >\n        <div class=\"card-body\">\n            <h3 class=\"card-title\"><img alt=\"${p.author.username}\" height=\"40px\" src=\"${p.author.photoUrl}\" class=\"rounded-circle mr-3 mb-1\">${p.title}</h3>\n            \n            <h6 class=\"card-subtitle mb-2 text-muted\">By ${p.author.username} ${\n         // @ts-ignore\n         printDate(p.time.toDate())}</h6>\n            <p class=\"card-text\">${p.content}</p>\n            ${p.comments.length==0 ? ``:`<details><summary><h5 class=\"card-title comment-title\">Comments </h5></summary>\n            <ul class=\"list-group\" >\n                ${makeCommentList(p.comments)}\n\n            </ul>\n            </details>`}\n        </div>\n    </div>`;\n}\n\n // @ts-ignore\n function showPost(p: Post, dest:string) :void {\n    const newPost = document.createElement(\"DIV\");\n\n    document.getElementById(dest).prepend(newPost);\n    newPost.outerHTML = makePost(p);\n}\n\n\n/*\nconst example: Post = {\n    author: {username: \"Saumya Singhal\", uid: \"abcd\", photoUrl: \"https://socrathematics.github.io/icons/redPi.png\"},\n    title: \"An example post\",\n    time: new Date(),\n    content: \"This is an example post.\",\n    comments:[{author:{username: \"Saumya Singhal\", uid: \"abcd\", photoUrl: \"https://i.redd.it/79pyeyh73f921.jpg\"}, time: new Date(2020, 7, 31, 8, 42, 31, 45), content: \"This is an example comment.\"}]\n};\n\n const example2: Post = {\n     author: {username: \"Saumya Singhal\", uid: \"abcd\", photoUrl: \"https://i.redd.it/79pyeyh73f921.jpg\"},\n     title: \"Another example post\",\n     time: new Date(\"2020-07-29T19:58:00-07:00\"),\n     content: \"This is another example post.\",\n     comments:[]\n };\n*/\n // @ts-ignore\n let posts;\n // @ts-ignore\n db.collection(\"blog\").doc(\"posts\")\n     .onSnapshot(function(doc) {\n         console.log(\"Current data: \", doc.data());\n         const d =doc.data();\n         posts = d.all;\n         document.getElementById(\"postHolder\").innerHTML = \"\";\n         for (var p of posts){\n             showPost(p, \"postHolder\");\n         }\n        typeset()\n     });\n\n\n//goal is to get posts from firebase\n\n\n\n\n//showPost(example);"]}